<link rel="import" href="../../padlock.html">
<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../view/view.html">
<link rel="import" href="../dialog/dialog.html">
<link rel="import" href="../input/input.html">
<link rel="import" href="../toggle/toggle.html">
<link rel="import" href="../notification/notification.html">

<dom-module id="padlock-settings-view">

    <link href="../view/view.css" rel="import" type="css">
    <link href="settings-view.css" rel="import" type="css">

    <template>
        <div class="section">
            <button class="settings-button" on-tap="_import">Import Data</button>
            <button class="settings-button" on-tap="_resetData">Reset Data</button>
            <button class="settings-button" on-tap="_changePassword">Change Master Password</button>
        </div>
        <div class="section">
            <button class="settings-button" on-tap="_cloudConnect"
                hidden$="{{ settings.sync_connected }}">Connect To Padlock Cloud</button>
            <button class="settings-button" on-tap="_cloudDisconnect" hidden$="{{ !settings.sync_connected }}">
                <div>Disconnect <span class="email">(<span>{{ settings.sync_email }}</span>)</span></div></button>
            <button class="settings-button" on-tap="_resetRemoteData"
                hidden$="{{ !settings.sync_connected }}">Reset Remote Data</button>
            <div class="settings-row" hidden$="{{ !settings.sync_connected }}" on-tap="_toggle">
                <span>Auto Sync</span><padlock-toggle id="autoSyncToggle" value="{{ settings.sync_auto }}" notap></padlock-toggle>
            </div>
        </div>
        <div class="section">
            <div class="settings-row" on-tap="_toggle">
                <span>Obfuscate Fields</span><padlock-toggle value="{{ settings.obfuscate_fields }}" notap></padlock-toggle>
            </div>
        </div>
        <div class="section">
            <button class="settings-button" on-tap="_openWebsite">Website</button>
            <button class="settings-button" on-tap="_sendMail">Support</button>
            <div class="info" on-tap="_openGithub">Developed and maintained by <strong>Martin Kleinschrodt</strong></div>
        </div>
        <!-- PROGRESS INDICATOR -->
        <padlock-progress id="progress">Sending request...</padlock-progress>
        <!-- CONNECT DIALOG -->
        <padlock-dialog id="connectDialog">
            <input is="padlock-input" placeholder="Email Address" id="emailInput" type="email"/>
            <input is="padlock-input" placeholder="Device Name (e.g. 'Bens iPhone')" id="deviceNameInput"/>
            <button class="primary" on-tap="_confirmConnect">OK</button>
        </padlock-dialog>
        <!-- CONFIRM DISCONNECT DIALOG -->
        <padlock-dialog id="disconnectDialog">
            <div class="title">Are you sure you want to disconnect from Padlock Cloud?</div>
            <button class="primary" on-tap="_confirmDisconnect">OK</button>
            <button on-tap="_cancelDisconnect">Cancel</button>
        </padlock-dialog>
        <!-- CHANGE PASSWORD DIALOG -->
        <padlock-dialog id="changePasswordDialog">
            <input is="padlock-input" type="password" placeholder="Enter Current Password" id="currPwdInput"/>
            <input is="padlock-input" type="password" placeholder="Enter New Password" id="newPwdInput"/>
            <input is="padlock-input" type="password" placeholder="Confirm Password" id="confirmNewPwdInput"/>
            <button class="primary" on-tap="_confirmChangePassword">OK</button>
        </padlock-dialog>
        <!-- ALERT -->
        <padlock-dialog id="alertDialog">
            <div class="title" id="alertText"></div>
            <button on-tap="_dismissAlert">OK</button>
        </padlock-dialog>
        <!-- CONFIRM RESET DATA DIALOG -->
        <padlock-dialog id="resetDataDialog">
            <div class="title">Are you sure you want to reset all your data? This action can not be undone! Please enter your master password to confirm.</div>
            <input is="padlock-input" id="resetConfirmPwd" placeholder="Enter Master Password" type="password"/>
            <button class="primary" on-tap="_confirmResetData">OK</button>
            <button on-tap="_cancelResetData">Cancel</button>
        </padlock-dialog>
        <!-- CONFIRM RESET REMOTE DATA DIALOG -->
        <padlock-dialog id="resetRemoteDataDialog">
            <div class="title">Are you sure you want to reset all your data on Padlock Cloud?</div>
            <button class="primary" on-tap="_confirmResetRemoteData">OK</button>
            <button on-tap="_cancelResetRemoteData">Cancel</button>
        </padlock-dialog>

        <padlock-notification id="notification"></padlock-notification>

    </template>

    <script src="settings-view.js"></script>

</dom-module>
