<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="view.html">

<polymer-element name="padlock-lock-view" extends="padlock-view">
    <template>
        <!-- STYLES -->
        <link href="lock-view.css" rel="stylesheet" type="text/css">
        <!-- WRAPPER (for centering) -->
        <div class="wrapper {{ errorMessage ? 'error' : '' }}">
            <!-- HEADER -->
            <div class="header">
                Padlock
            </div>
            <!-- PASSWORD INPUT -->
            <input type="password" placeholder="Enter Password" on-keydown="{{ keydown }}" id="pwdInput"/>
            <!-- ENTER BUTTON -->
            <button class="enter-button primary" on-tap="{{ enter }}">OK</button>
            <!-- ERROR MESSAGE -->
            <div class="error-message">{{ errorMessage }}</div>
        </div>
    </template>
    <script>
        Polymer("padlock-lock-view", {
            keydown: function(event, detail, sender) {
                if (event.keyCode == 13) { 
                    this.enter();
                }
            },
            enter: function() {
                this.$.pwdInput.blur();
                this.fire("enter", {password: this.$.pwdInput.value});
            },
            show: function(animation, callback) {
                var input = this.$.pwdInput;
                input.value = "";
                var cb = function() {
                    input.focus();
                    if (callback) {
                        callback();
                    }
                } 
                this.super([animation, cb]);
            }
        });
    </script>
</polymer>